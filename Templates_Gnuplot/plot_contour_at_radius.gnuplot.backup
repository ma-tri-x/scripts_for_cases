#!/bin/gnuplot

reset
#set term wxt
#set output

set term pngcairo transparent font "DejaVuSerif, 18pt" size 1000,1000 #postscript enhanced solid color font "DejaVuSerif, 18pt"
set output "contour.png" #"contour.eps"
# UNCOMMENTFORKEY set key above #top left
# UNCOMMENTFORNOKEY unset key
set key above
set size ratio -1
set tics out
set grid lw 3
set datafile separator ","



#autofreq start,incr:
#1STNOCOMMENT set ylabel "y [{/Symbol m}m]"
#1STNOCOMMENT set xlabel "x [{/Symbol m}m]"
#1STNOCOMMENT set xtics autofreq 100
#1STNOCOMMENT set ytics autofreq 100
set ylabel "y [{/Symbol m}m]"
set xlabel "x [{/Symbol m}m]"
set xtics autofreq 100
set ytics autofreq 100

#1STCOMMENT set xtics autofreq 0,100 
#1STCOMMENT unset ylabel
#1STCOMMENT unset xlabel
#1STCOMMENT set format y ""

set xrange [-350:350]
set yrange [-30:600]

dir1 = "../kk010_piston_axi_static_3mum/"
time_theory_1 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f -e 101e-6",dir1,radius,start_time))
time_1 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir1,time_theory_1))
time_idx_1 = system(sprintf("python %sget_index_of_time.py %s",dir1,time_1))
file1=sprintf("bla0.%s.csv",time_idx_1 )

dir2 = "../kk010_piston_axi_static/"
time_theory_2 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f -e 104.3e-6",dir2,radius,start_time))
time_2 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir2,time_theory_2))
time_idx_2 = system(sprintf("python %sget_index_of_time.py %s",dir2,time_2))
file2=sprintf("bla0.%s.csv",time_idx_2)

dir3 = "../kk010_piston_axi_static_0.75mum/"
time_theory_3 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f -e 104.5e-6",dir3,radius,start_time))
time_3 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir3,time_theory_3))
time_idx_3 = system(sprintf("python %sget_index_of_time.py %s",dir3,time_3))
file3=sprintf("bla0.%s.csv",time_idx_3)


plot \
dir3."contour/".file3 u ( ($2)*1e6):(($3)*1e6) w l lw 7 lc 7 dt 1 t "0.75{/Symbol m}m",\
dir3."contour/".file3 u (-($2)*1e6):(($3)*1e6) w l lw 7 lc 7 dt 1 notitle ,\
dir1."contour/".file1 u ( ($2)*1e6):(($3)*1e6) w l lw 3 lc 1 dt 1 t "3{/Symbol m}m",\
dir2."contour/".file2 u (-($2)*1e6):(($3)*1e6) w l lw 3 lc 2 dt 1 t "1.5{/Symbol m}m"

