#!/bin/gnuplot

reset
#set term wxt
#set output

set term postscript enhanced solid color font "DejaVuSerif, 24pt"
set output "contour.eps"
UNCOMMENTFORKEY set key top left
UNCOMMENTFORNOKEY unset key
set size ratio -1
set tics out
set grid
set datafile separator ","

#autofreq start,incr:
1STNOCOMMENT set ylabel "y [{/Symbol m}m]"
1STNOCOMMENT set xlabel "x [{/Symbol m}m]"
1STNOCOMMENT set xtics autofreq 100
1STNOCOMMENT set ytics autofreq 100
1STNOCOMMENT set title "same equiv. radius"

1STCOMMENT set xtics autofreq 100,100 
1STCOMMENT unset ylabel
1STCOMMENT unset xlabel
1STCOMMENT set format y ""

set xrange [0:250]
set yrange [-400:100]

dir1 = "../0071_dstar1.6_from_sose2019_boxBubble_2mum/"
time_theory_1 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f",dir1,radius,start_time))
time_1 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir1,time_theory_1))
time_idx_1 = system(sprintf("python %sget_index_of_time.py %s",dir1,time_1))
file1=sprintf("bla0.%s.csv",time_idx_1)

dir2 = "../0071_dstar1.6_from_sose2019_boxBubble_1.5mum/"
time_theory_2 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f",dir2,radius,start_time))
time_2 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir2,time_theory_2))
time_idx_2 = system(sprintf("python %sget_index_of_time.py %s",dir2,time_2))
file2=sprintf("bla0.%s.csv",time_idx_2)

dir3 = "../0071_dstar1.6_from_sose2019_boxBubble/"
time_theory_3 = system(sprintf("python %sget_time_of_radius.py -r %f -t %f",dir3,radius,start_time))
time_3 = system(sprintf("python %sget_closest_timestep.py -p processor0 -t %s",dir3,time_theory_3))
time_idx_3 = system(sprintf("python %sget_index_of_time.py %s",dir3,time_3))
file3=sprintf("bla0.%s.csv",time_idx_3)

plot \
dir1."contour/".file1 u (($3)*1e6):(($4)*1e6) w l lw 3 lc 1 dt 1 t "2{/Symbol m}m",\
dir2."contour/".file2 u (($3)*1e6):(($4)*1e6) w l lw 3 lc 2 dt 1 t "1.5{/Symbol m}m",\
dir3."contour/".file3 u (($3)*1e6):(($4)*1e6) w l lw 5 lc 3 dt 1 t "1{/Symbol m}m"

